<!-- Required Meta Tags -->
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />
<link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />

<div class="container my-5">

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2 class="fw-bold mb-1">Interview Management</h2>
      <p class="text-muted mb-0">Track and update interview results</p>
    </div>

    <a href="/interviews/open_form" class="btn btn-success px-4 py-2">
      + Assign Interview
    </a>
  </div>

  <% if(students.length > 0) { %>

  <!-- Table Card -->
  <div class="card shadow-sm border-0">
    <div class="table-responsive">
      <table class="table align-middle mb-0 interview-table">
        <thead>
          <tr>
            <th>Company</th>
            <th>Student</th>
            <th>Email</th>
            <th>Contact</th>
            <th>Batch</th>
            <th>Date</th>
            <th>Result</th>
          </tr>
        </thead>

        <tbody>
          <% for(let student of students){ %>
            <% let i = 0; %>
            <% while(i < student.interviews.length){ %>

            <tr>
              <td class="fw-semibold"><%= student.interviews[i].company %></td>
              <td><%= student.name %></td>
              <td><%= student.email %></td>
              <td><%= student.contact %></td>
              <td><%= student.batch %></td>
              <td><%= student.interviews[i].date %></td>
              <td>
                <form
                  class="d-flex justify-content-center align-items-center gap-2"
                  action="/interviews/update/<%= student.id %>"
                  method="post"
                >
                  <input hidden type="text" name="companyName" value="<%= student.interviews[i].company %>" />

                  <select class="form-select form-select-sm result-select" name="companyResult">
                    <option selected><%= student.interviews[i].result %></option>
                    <option value="Selected">Selected</option>
                    <option value="Not Selected">Not Selected</option>
                    <option value="On Hold">On Hold</option>
                    <option value="Pending">Pending</option>
                  </select>

                  <button type="submit" class="btn btn-warning btn-sm">
                    Update
                  </button>
                </form>
              </td>
            </tr>

            <% i++; %>
            <% } %>
          <% } %>
        </tbody>
      </table>
    </div>
  </div>

  <% } else { %>
    <div class="text-center mt-5">
      <h4 class="text-muted">No Records Found</h4>
    </div>
  <% } %>

</div>

  <!-- <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script> -->
